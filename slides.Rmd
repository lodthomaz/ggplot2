---
title: "Conhecendo o ggplot"
subtitle: "RLadies Teresina"
author: "Letícia Thomaz (RLadies - SP)"
date: "05/06/2021"
output:
  xaringan::moon_reader:
    css: ["default", "rladies.css", "rladies-fonts"]
    nature:
          highlightLines: true
          highlightStyle: github
---

```{r pacotes_e_dados, include=FALSE}
library(ggplot2)
library(dplyr)
library(janitor)

# Carrega os dados 
dados <- read.csv2("./data/winequality-red.csv", sep = ',', dec = '.') %>% 
  clean_names() %>% 
  mutate(qualidade = if_else(quality <= 3, "Ruim", 
                             if_else(quality > 3 & quality < 7, "Normal", "Bom")))

# Renomeando a variável ph
names(dados)[names(dados) == 'p_h'] <- 'ph'


```


class: inverse, center, middle

# GGPLOT2

---

# ggplot2

Existem diversas formas de fazer gráficos no R

Uma delas é utilizando o pacote **_ggplot2_**


### Por que usar esse pacote? 

+ faz gráficos elegantes
+ muito versátil
+ implementa a "gramática dos gráficos" 


--

# Instalação

```{r eval=FALSE, tidy=FALSE}
install.packages("ggplot2")
library(ggplot2)
```

---
class: middle

# "Gramática dos Gráficos" 

* É uma ferramenta que permite descrever os componentes de um gráfico

* Um [artigo](http://vita.had.co.nz/papers/layered-grammar.pdf) propôs uma parametrização alternativa dessa gramática

* Traz a ideia de construir um gráfico a partir de várias **camadas de dados**

* As ideias desse artigo foram implementadas no **_ggplot2_**

---

# Como construir um gráfico?

### Dados

[Base de dados](https://www.kaggle.com/uciml/red-wine-quality-cortez-et-al-2009) de características de vinhos (acidez, densidade, % álcool, qualidade)

--

### Mapear o que queremos plotar

  * qual variável queremos colocar no eixo x?
  * qual variável queremos colocar no eixo y?
  
--

### Definir qual o objeto geométrico queremos criar

  * ponto?
  * linha?
  * barras?

--

### ... Melhorar a estética

---

# Estrutura Básica do ggplot2

--

#### Dados 

```{r eval=FALSE, tidy=FALSE}
* ggplot(data = [SUA BASE DE DADOS],
       mapping = aes(x = [VARIÁVEL DO EIXO X],
                     y = [VARIÁVEL DO EIXO Y]))) + 
  geom_[OBJETO]
```

--

#### Variáveis 

```{r eval=FALSE, tidy=FALSE}
ggplot(data = [SUA BASE DE DADOS],
*       mapping = aes(x = [VARIÁVEL DO EIXO X],
*                    y = [VARIÁVEL DO EIXO Y]))) + 
  geom_[OBJETO]
```

--

#### Objeto geométrico

```{r eval=FALSE, tidy=FALSE}
ggplot(data = [SUA BASE DE DADOS],
       mapping = aes(x = [VARIÁVEL DO EIXO X],
                     y = [VARIÁVEL DO EIXO Y]))) + 
*  geom_[OBJETO]
```

---

### Gráfico de dispersão do ph dos vinhos contra a acidez fixa

```{r eval=FALSE, tidy=FALSE}
ggplot(data = dados,
       mapping = aes(x = ph, 
                     y = fixed_acidity)) + 
  geom_point()
```

--

```{r echo=FALSE, fig.align='center', fig.dim=c(7,6)}
ggplot(data = dados,
       mapping = aes(x = ph, 
                     y = fixed_acidity)) + 
  geom_point()
```

---

# Objetos Geométricos

- Gráficos de dispersão: `geom_point()`

- Gráficos de barras: `geom_col()` ou `geom_bar()`

- Gráficos de linhas: `geom_line()`

- Histograma: `geom_hist()`

- Boxplot: `geom_boxplot()`

- Densidade: `geom_density()`

- Suavização: `geom_smooth()`

- Adicionar etiquetas ou textos: `geom_label()` ou `geom_text()`

---

## Parâmetros dos Objetos Geométricos

Todos esses objetos geométricos possuem elementos estéticos. Por exemplo:

### geom_point()

Os parâmetros disponíveis são:

- **x**: variável do eixo x
- **y**: variável do eixo y 
- **alpha**: controla a transparência dos pontos
- **colour**: define a cor dos pontos 
- **fill**: define a cor de preenchimento dos pontos
- **group**: agrupa os dados por outra variável
- **shape**: define o formato dos pontos
- **size**: define o tamanho dos pontos
- **stroke**: define o tamanho da borda dos pontos

[Fonte](https://ggplot2.tidyverse.org/reference/geom_point.html)

---

### Gráfico de dispersão do ph dos vinhos contra a acidez fixa
Dessa vez vamos contornar os pontos e mudar o formato de acordo com a qualidade do vinho, e aumentar um pouco o tamanho

```{r eval=FALSE, tidy=FALSE}
ggplot(data = dados) + 
  geom_point(mapping = aes(x = ph, 
                           y = fixed_acidity,
*                          colour = factor(qualidade),
*                          shape = factor(qualidade))
```

--

```{r echo=FALSE, fig.align='center', fig.dim=c(8,5)}
ggplot(data = dados) + 
  geom_point(mapping = aes(x = ph, 
                           y = fixed_acidity,
                           colour = factor(qualidade),
                           shape = factor(qualidade)))
```



---

class: inverse, middle, center


# Obrigada!

Slides criados usando o pacote [**xaringan**](https://github.com/yihui/xaringan).

Todo o material está disponível no [**github!**]()








